====  d3forum の whatsnewモジュール用プラグイン  ===

はっぴぃ・りなっくす さんが配布されている WhatsNewモジュールを利用して、GIJOE さん作のフォーラムモジュール d3forum の新着投稿を表示するためのプラグインです。

解凍すると "html/modules/whatsnew/plugins/d3forum/" というディレクトリが展開され、このディレクトリの中にプラグインがあります。

d3forum を「d3forum」以外のディレクトリにインストールしている場合は、プラグインのディレクトリ名を変更してください。

【インストール例】
例えば d3forum1 と d3forum2 という２つの d3forumを使用している場合、

modules/whatsnew/plugins/d3forum1/
modules/whatsnew/plugins/d3forum2/

というようにすれば、２つの d3forum の新着情報を表示させることができます。

【プラグインの選択】
利用状況に合わせて、２種類のプラグインを選択できるようになっています。WhatsNewモジュールの「モジュール設定」で、使用するプラグインを選択してご利用ください。

１　d3forum v0.70
　　一般的な利用に適したベーシックなプラグインです。

２　d3forum v0.70 with permission check
　　次の２種類の機能を追加したプラグインです。
　(1) whatsnew 2.40 で、「アクセス権限のないモジュールの表示」を設定している場合は、d3forum の設定に関わらず、ゲストにユーザーと同等の情報を表示させることができます。
　　「アクセス権限のないモジュールの表示」を設定していても、管理者グループにのみ閲覧権限があるコンテンツの情報は表示されません。

　(2) コメント統合時には、コメント統合クラスを利用して閲覧権限のチェックをすることができます。
　　コメント元のモジュールに validate_id() を実装したコメント統合クラスを導入している必要があります。
　　
【このプラグインの仕様】
※閲覧権限のチェックをしたうえで、新着情報ブロックに表示されます。
※コメント統合時には、コメント統合クラスを利用して閲覧権限のチェックをすることができます。
※オプションで、ブロックに表示するカテゴリーを設定することができます。
※デフォルトではピック毎の最新投稿を表示しますが、オプションで全投稿を表示することができます。

【カテゴリー・オプション設定例】
$category_option = '1,2';

このように、data.inc.php の中の変数 $category_option に、カテゴリー番号をカンマ(,)で区切って記入すると、カテゴリー番号1と2の新着投稿のみ表示することができます。
空欄なら全カテゴリー表示。

【トピック・オプション】
$topic_option = '1';

このように、data.inc.php の中の変数 $topic_option に、1を記入すると全投稿を表示します。
空欄ならトピック毎の最新投稿を表示。

【更新履歴】
1.40 2008-10-11
- ゲスト名の表示に対応

1.30a 2007-12-23
- WhatsNewモジュールの「モジュール設定」で、２種類のプラグインを選択できるようにした。

1.30 2007-12-19
- コメント統合時に、コメント統合クラスの validate_id() を利用した閲覧権限のチェックを追加

1.20 2007-12-16
- whatsnew 2.40 で、「アクセス権限のないモジュールの表示」を設定している場合、ゲストでもユーザーと同一の閲覧権限を持てるように修正

1.10 2007-05-20
- トピック・オプションを追加

1.00 2007-05-19
- カテゴリー・オプションを追加

0.30 2007-05-11
- UNAPPROVAL(未承認)の投稿が新着情報ブロックに表示されてしまう問題を修正

0.20 2007-05-10
- 閲覧権限のチェックを追加